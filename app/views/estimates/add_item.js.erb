var trCategory = $('tr#category_<%= @category_template.category.id %>');
var addItem = trCategory.nextAll("tr.add-item").first();
if ($('#template-placeholder').attr("data-kind") == "Cost Plus Bid") {
  $('<%= escape_javascript(render :partial => 'estimates/cost_plus_bid/tr_item' , :locals => {:item => @item, :category_template => @category_template}) %>').insertBefore(addItem);
} else {
  $('<%= escape_javascript(render :partial => 'tr_item', :locals => {:item => @item, :category_template => @category_template}) %>').insertBefore(addItem);
}

if (addItem.hasClass("temp")) {
    addItem.remove();
} else {
    addItem.hide();
}
Shared.calculateSubTotals();
Shared.calculateTotals();