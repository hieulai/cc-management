<table class="grid-view data-tables" id="bill-list" summary="Bill List">
    <thead>
    <tr class="header">
        <th>Due Date</th>
        <th>Bill #</th>
        <th>PO #</th>
        <th>Project</th>
        <th>Category</th>
        <th>Vendor</th>
        <th>Amount</th>
        <th>Notes</th>
        <th style="display: none;">Paid Status</th>
    </tr>
    </thead>
    <tbody>
    <% bills.each do |b| %>
        <tr class="clickable <%= b.full_paid? ? "unclickable" : "" %>">
            <td class="center">
                <%= b.source(:due_date) %>
                    <% if b.generated? %>
                        <% if b.purchase_order_id %>
                            <%= link_to("Edit", {:action => 'edit_purchase_order', :id => b.purchase_order_id}, :class => 'action edit clickable-link', :style => 'display: none') %>
                        <% end %>
                    <% else %>
                        <%= link_to("Edit", {:action => 'edit_bill', :id => b.id}, :class => 'action edit clickable-link', :style => 'display: none') %>
                    <% end %>
            </td>
            <td class="center">
                <%= b.id %>
            </td>
            <td class="center"><%= link_to b.purchase_order_id, {:action => 'edit_purchase_order', :id => b.purchase_order_id}, :target => "_blank" if b.purchase_order.present? %></td>
            <td><%= b.source(:project).try(:name) %></td>
            <td><%= b.source(:categories_template).try(:category).try(:name) %></td>
            <td><%= b.source(:vendor).try(:display_name) %></td>
            <td class="right"><%= number_to_currency(b.cached_total_amount) %></td>
            <td><%= b.source(:notes) %></td>
            <td style="display: none;"><%= b.paid_status %></td>
        </tr>
    <% end %>
    </tbody>
</table>
<%= will_paginate bills %>